 Trabajo Práctico Especial Segundo Cuatrimestre 2024
Objetivo	1
Enunciado	1
Intérprete de comandos	2
Funcionalidades	2
Fuentes	4
Integrantes	4
Calificación	4
Entregables	5
Consideraciones	5
Fechas de entrega y defensa	6
   Implementar un kernel que administre los recursos de hardware de una computadora y muestre características del modo protegido de Intel.

   Implementar un kernel booteable por Pure64, modificado y provisto por la cátedra. El mismo debe administrar los recursos de hardware y proveer una API para que aplicaciones de usuarios puedan utilizar estos recursos.
   Se deben definir dos espacios claramente separados, uno kernel space y el otro user space. El espacio del kernel interactuará directamente con el hardware mediante drivers, mientras al mismo tiempo proveerá funciones al user space. El espacio de usuario no debe acceder por ninguna razón directamente al hardware, sólo a través del espacio de kernel. En la Figura 1 se puede ver un ejemplo de los módulos que conforman el espacio de usuario y los módulos que conforman el espacio de kernel.
   Se deberá definir una API con la cual el espacio de usuario puede acceder a las funciones del kernel. Este acceso deberá ser implementado a través de la interrupción de software 80h, ya que estos dos módulos se encuentran en distintos espacios de memoria. Dicha API deberá basarse en la API de Linux, que está comprendida por funciones cómo read y write.
   Además se deberá definir un set de funciones para interactuar con dicha API, deberá formar parte al equivalente en Linux a la biblioteca estándar de C. En la cual, se deberá estar basado. Por ejemplo, deberá contar con funciones como scanf, printf, putChar, getChar.
La implementación del sistema se detalla a continuación.

Intérprete de comandos
   El cual, a través de los comandos de la shell, demuestre el funcionamiento del kernel. Deberá tomar dichos comandos por entrada estándar y mostrar el resultado de la ejecución por salida estándar. El intérprete deberá interactuar con el sistema mediante un modelo de Terminal. Este intérprete de comandos deberá siempre despegar su prompt para ingreso de nuevos comandos.

Funcionalidades
* Una función de ayuda, que muestre los distintos programas disponibles.
* Intérprete de comandos, tipo Shell que desencadene las distintas funcionalidades.
* El kernel deberá poder manejar dos tipos de excepciones: división por cero y código de operación inválido. Ante estas excepciones se deberá desplegar información sobre el tipo de error, instruction pointer y registros en el momento del error. El sistema debe poder recuperarse posteriormente de la excepción, regresando a la Shell.
* Módulos/comandos para verificar el funcionamiento de las rutinas de excepción antes descritas.
* Módulo/comandos para desplegar la hora del sistema
* Luego de que el sistema arranca, queda el prompt en espera a que se ingrese qué módulo se desea correr.
* Se deberá disponer de una funcionalidad que permita obtener el valor de los registros del procesador en cualquier momento que se desee.
* Módulo/comando que permita graficar en modo video el juego Snakes. https://snake.googlemaps.com/
- Implemente la selección de 1 jugador en pantalla o que sean 2 los jugadores en pantalla (simultáneamente sobre un único escenario, ambos jugadores compiten por quién agarra primero al mismo pasajero).
- Use un conjunto de teclas para el movimiento de los jugadores y manteniendo en pantalla un puntaje.
- Deberá emitir un sonido en momentos que considere oportunos del juego.
- Simplifique los gráficos, no es requerido el detalle de texturas como en el ejemplo.



* Haga todas las mejoras en la jugabilidad que considere apropiadas, ya sea en lo que respecta a velocidad del juego, visuales, u otros aspectos del ejemplo.
* Comando que permita agrandar o reducir el tamaño del texto de la pantalla.
* Cualquier otra función que el grupo considere apropiada para mostrar el funcionamiento interno del sistema.

Figura 1: Ejemplo de módulos.

Los requerimientos implican la implementación de drivers de teclado y video.
   El sistema deberá ser implementado para una Arquitectura Intel de 64 bits en Long Mode. La entrada a ese modo será provista por un módulo implementado por la cátedra y debe correr en una PC física real. La exposición y demostración del sistema implementado se realizará en QEMU.

Cómo base del trabajo práctico, descargar los archivos del siguiente repositorio:


El grupo de trabajo podrá contar con un máximo de tres (3) integrantes.


   La nota del trabajo práctico consta de la evaluación de los entregables más la demostración de su funcionamiento en un coloquio oral. En dicho coloquio se podrá consultar a cualquier integrante cualquier porción de código cuál es su implementación y funcionamiento. Además se podrán consultar conceptos teóricos de la materia.
   A la hora de la presentación, todos los miembros deberán estar presentes, salvo causa de fuerza mayor, en la cual, el integrante faltante deberá acreditar la documentación que justifique la falta. Dicho integrante luego deberá rendir el coloquio oral en la fecha que se acuerde con la cátedra.

   En el caso de que se deba re-entregar el TPE por no estar aprobado en primera instancia, se penalizará a los integrantes del grupo con una disminución de 2 (dos) puntos sobre la nota final. Es decir, será necesario un 6 (seis) para aprobar el trabajo práctico en instancia de recuperación.

   Cada grupo deberá entregar por email, un archivo ZIP (compartido desde el google drive, puesto que si intentan adjuntar directo el archivo, es bloqueado por cuestiones de seguridad) con lo siguiente:
- Código fuente (sin los binarios).
- Manual de usuario. Que detalle los comandos implementados y toda otra información que considere pertinente para el uso de su shell.
- Informe. Que explique el diseño elegido con sus justificaciones, pros, contras. Aspectos técnicos y toda otra información que resulte relevante al desarrollo del trabajo.
- Correspondiente hash md5, en el cuerpo del mail.
   El archivo debe estar nombrado cómo gNN-X-Y-Z.zip, donde X, Y, Z son los legajos de los participantes y NN es el número del grupo (NN = 01, 02, 03,...). Tener en cuenta que el hash md5 es la firma del grupo sobre el entregable. En caso de tener problemas con el envió del TPE, enviar el hash directamente.
   El link del archivo compartido con todo el material deberá ser enviado en forma digital el día de la entrega vía email a la casilla:
arq-entrega-tpe@googlegroups.com


* El tipo de diseño y la forma de implementación serán discutidos entre el grupo y la cátedra durante las clases de laboratorio, dejando la posibilidad de modificar éste enunciado escrito, previo acuerdo entre el docente y los integrantes del grupo.
* Para la evaluación se tendrá en cuenta no sólo el funcionamiento del programa sino también la calidad del software y la documentación escrita pedida.
* Cualquier funcionalidad agregada al TPE por sobre lo pedido deberá estar documentada apropiadamente.
* Cualquier código encontrado en Internet u otra fuente debe ser consultado con la cátedra previo a la inclusión en el TPE. Toda inclusión de código de terceros deberá ser documentada con los enlaces o referencias correspondientes a su origen. Deben estar sumarizados en el informe de la cátedra.
* Cualquier aclaración oral a cargo de la cátedra con respecto al enunciado del TPE tiene la misma validez que el enunciado escrito.

* Los distintos grupos podrán consultar y discutir diseños entre sí, pero la implementación deberá ser propia de cada uno. Cualquier detección de plagio es susceptible de sanciones académicas de acuerdo al reglamento de la Universidad.
* Todos los trabajos corren sobre la misma arquitectura y cuentan con el mismo template, por lo tanto existirán muchos códigos equivalentes o similares. La cátedra tendrá esta situación en cuenta.

La entrega del TPE completo con el manual de usuario e informe es hasta el:


Via correo electrónico dirigido al correo de la cátedra.
Habrá una defensa presencial para todos los grupos. Será en los días:





Oportunamente se publicará un horario y día de presentación para cada grupo.
   Terminada esta instancia, se informará aquellos grupos que tengan que hacer una nueva entrega (recuperatorio TPE).
La fecha de entrega del TPE recuperatorio será hasta el:


Vía correo electrónico. La defensa (de la reentrega) será los días:






